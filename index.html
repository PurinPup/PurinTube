<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MiniTube</title>
<link rel="icon" type="image/png" href="Logo.png"> <!-- Favicon -->
<style>
/* --- Galaxy Background --- */
body {
    font-family: Arial, sans-serif;
    margin:0; padding:0;
    background: linear-gradient(-45deg, #1a1a2e, #162447, #1f4068, #e43f5a);
    background-size: 400% 400%;
    animation: gradientBG 25s ease infinite;
    color:white;
}
@keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
}

/* --- Header --- */
header {
    background: rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    padding:10px 20px;
    position: sticky;
    top:0;
    z-index:100;
}

header img {
    height: 60px; /* Bigger logo */
    margin-right:15px;
}

#search-bar {
    flex:1;
    display:flex;
    justify-content:center;
}

#search-input {
    width:70%;
    padding:10px 20px;
    border-radius:25px;
    border:none;
    font-size:16px;
}

#search-button {
    margin-left:10px;
    padding:10px 20px;
    border:none;
    border-radius:25px;
    background:#ff0000;
    color:white;
    cursor:pointer;
    font-weight:bold;
}

/* --- Layout --- */
.container {
    display:flex;
    margin-top:10px;
    gap:15px;
    padding:10px;
}

/* Main content */
#main {
    flex:3;
}

/* Recommended videos sidebar */
#sidebar {
    flex:1;
}

/* Video cards */
.video-card {
    background: rgba(0,0,0,0.5);
    border-radius:8px;
    margin-bottom:15px;
    cursor:pointer;
    overflow:hidden;
    box-shadow:0 2px 5px rgba(0,0,0,0.5);
    transition: transform 0.2s;
    display:flex;
    gap:10px;
}

.video-card:hover { transform: scale(1.02); }

.video-card img {
    width:40%;
    border-radius:5px;
}

.video-info {
    flex:1;
    padding:5px 10px;
}

.video-title {
    font-size:14px;
    font-weight:bold;
    color:white;
}

.video-channel {
    font-size:12px;
    color:#ccc;
    margin-top:5px;
}

/* Player */
#player-container {
    display:none;
    text-align:center;
    margin-bottom:20px;
}

#close-player {
    margin:10px;
    cursor:pointer;
    color:#ff0000;
    font-weight:bold;
    font-size:18px;
}

iframe {
    border-radius:8px;
    width:100%;
    max-width:900px;
    height:500px;
}

/* Load More button */
#load-more {
    display:block;
    margin:10px auto;
    padding:10px 20px;
    font-size:16px;
    cursor:pointer;
    background:#ff0000;
    border:none;
    border-radius:25px;
    color:white;
}

/* Responsive */
@media(max-width:900px){
    .container { flex-direction:column; }
    #sidebar { flex:none; }
    iframe { height:300px; }
}
</style>
</head>
<body>

<header>
    <img src="Logo.png" alt="Logo">
    <div id="search-bar">
        <input type="text" id="search-input" placeholder="Search">
        <button id="search-button">Search</button>
    </div>
</header>

<div class="container">
    <div id="main">
        <div id="player-container">
            <div id="close-player">âœ– Close Video</div>
            <iframe id="video-player" src="" title="YouTube video player"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>
        <div id="results"></div>
        <button id="load-more" style="display:none;">Load More</button>
    </div>

    <div id="sidebar">
        <h3 style="color:white;">Recommended</h3>
        <div id="recommended"></div>
    </div>
</div>

<script>
// === CONFIG ===
const API_KEY = "YOUR_YOUTUBE_API_KEY"; // Replace with your key
const PAGE_SIZE = 9;

// Elements
const searchButton = document.getElementById('search-button');
const searchInput = document.getElementById('search-input');
const results = document.getElementById('results');
const recommendedDiv = document.getElementById('recommended');
const playerContainer = document.getElementById('player-container');
const videoPlayer = document.getElementById('video-player');
const closePlayer = document.getElementById('close-player');
const loadMoreBtn = document.getElementById('load-more');

let nextPageToken = '';
let currentQuery = '';
let allVideos = [];

// Search
async function searchVideos(isNewSearch=true){
    if(isNewSearch){
        results.innerHTML='Loading...';
        recommendedDiv.innerHTML='';
        nextPageToken='';
        allVideos=[];
    }
    const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=${PAGE_SIZE}&q=${encodeURIComponent(currentQuery)}&key=${API_KEY}`+(nextPageToken?`&pageToken=${nextPageToken}`:'');
    
    try{
        const res = await fetch(url);
        const data = await res.json();
        nextPageToken = data.nextPageToken || '';
        allVideos = allVideos.concat(data.items);
        renderVideos(data.items);
        renderRecommended(data.items.slice(0,5)); // first 5 recommended
        loadMoreBtn.style.display = nextPageToken ? 'block' : 'none';
    }catch(err){
        results.innerHTML='Error fetching videos.';
        console.error(err);
    }
}

// Render video cards
function renderVideos(videos){
    if(results.innerHTML==='Loading...') results.innerHTML='';
    videos.forEach(item=>{
        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const channel = item.snippet.channelTitle;
        const thumbnail = item.snippet.thumbnails.high.url;

        const card = document.createElement('div');
        card.className='video-card';
        card.innerHTML=`
            <img src="${thumbnail}" alt="Thumbnail">
            <div class="video-info">
                <div class="video-title">${title}</div>
                <div class="video-channel">${channel}</div>
            </div>
        `;
        card.addEventListener('click',()=>{
            videoPlayer.src=`https://www.youtube.com/embed/${videoId}`;
            playerContainer.style.display='block';
            window.scrollTo({top:playerContainer.offsetTop-20,behavior:'smooth'});
        });
        results.appendChild(card);
    });
}

// Recommended sidebar
function renderRecommended(videos){
    recommendedDiv.innerHTML='';
    videos.forEach(item=>{
        const videoId = item.id.videoId;
        const title = item.snippet.title;
        const channel = item.snippet.channelTitle;
        const thumbnail = item.snippet.thumbnails.medium.url;

        const card = document.createElement('div');
        card.className='video-card';
        card.style.flexDirection='row';
        card.style.width='100%';
        card.innerHTML=`
            <img src="${thumbnail}" alt="Thumbnail">
            <div class="video-info">
                <div class="video-title">${title}</div>
                <div class="video-channel">${channel}</div>
            </div>
        `;
        card.addEventListener('click',()=>{
            videoPlayer.src=`https://www.youtube.com/embed/${videoId}`;
            playerContainer.style.display='block';
            window.scrollTo({top:playerContainer.offsetTop-20,behavior:'smooth'});
        });
        recommendedDiv.appendChild(card);
    });
}

// Event listeners
searchButton.addEventListener('click',()=>{
    currentQuery = searchInput.value.trim();
    if(!currentQuery) return;
    searchVideos(true);
});

loadMoreBtn.addEventListener('click',()=>searchVideos(false));
closePlayer.addEventListener('click',()=>{
    videoPlayer.src='';
    playerContainer.style.display='none';
});
</script>

</body>
</html>

