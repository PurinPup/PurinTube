<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MiniTube - SkipVids Style</title>
<style>
/* Moving Galaxy Background */
body {
    font-family: Arial, sans-serif;
    margin:0; padding:0;
    background: linear-gradient(-45deg, #1a1a2e, #162447, #1f4068, #e43f5a);
    background-size: 400% 400%;
    animation: gradientBG 25s ease infinite;
    color:white;
}

@keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
}

header {
    background: rgba(0,0,0,0.6);
    color:white;
    padding:15px;
    text-align:center;
    font-size:28px;
    font-weight:bold;
    position: sticky;
    top:0;
    z-index:100;
}

#search-bar {
    display:flex;
    justify-content:center;
    margin:20px;
}

#search-input {
    width:60%;
    padding:12px;
    font-size:16px;
    border-radius:5px;
    border:none;
}

#search-button {
    padding:12px 20px;
    font-size:16px;
    margin-left:10px;
    cursor:pointer;
    border-radius:5px;
    border:none;
    background:#ff0000;
    color:white;
}

#results {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:15px;
    padding:10px;
}

.video-card {
    background: rgba(0,0,0,0.5);
    width:320px;
    cursor:pointer;
    border-radius:5px;
    overflow:hidden;
    box-shadow:0 2px 5px rgba(0,0,0,0.5);
    transition: transform 0.2s;
}

.video-card:hover {
    transform: scale(1.05);
}

.video-card img {
    width:100%;
    display:block;
}

.video-title {
    padding:10px;
    font-size:16px;
    font-weight:bold;
    color:white;
}

#player-container {
    display:none;
    text-align:center;
    margin:20px auto;
}

#close-player {
    margin:10px;
    cursor:pointer;
    color:#ff0000;
    font-weight:bold;
    font-size:18px;
}

iframe {
    border-radius:8px;
}
</style>
</head>
<body>

<header>MiniTube</header>

<div id="search-bar">
    <input type="text" id="search-input" placeholder="Search YouTube videos">
    <button id="search-button">Search</button>
</div>

<div id="results"></div>

<div id="player-container">
    <div id="close-player">âœ– Close Video</div>
    <iframe id="video-player" width="560" height="315" src="" title="YouTube video player"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div>

<script>
// Elements
const searchButton = document.getElementById('search-button');
const searchInput = document.getElementById('search-input');
const results = document.getElementById('results');
const playerContainer = document.getElementById('player-container');
const videoPlayer = document.getElementById('video-player');
const closePlayer = document.getElementById('close-player');

// Search function
searchButton.addEventListener('click', async () => {
    const query = searchInput.value.trim();
    if (!query) return;
    results.innerHTML = 'Loading...';
    
    const searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;
    
    try {
        // Use AllOrigins proxy for CORS
        const res = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(searchUrl)}`);
        const data = await res.json();
        const html = data.contents;
        
        const videoIds = [...html.matchAll(/"videoId":"(.*?)"/g)].map(m => m[1]);
        const uniqueIds = [...new Set(videoIds)].slice(0, 12); // show 12 results
        
        results.innerHTML = '';
        uniqueIds.forEach(id => {
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <img src="https://img.youtube.com/vi/${id}/hqdefault.jpg" alt="Thumbnail">
                <div class="video-title">Video</div>
            `;
            card.addEventListener('click', () => {
                videoPlayer.src = `https://www.youtube.com/embed/${id}`;
                playerContainer.style.display = 'block';
                window.scrollTo({ top: playerContainer.offsetTop - 20, behavior: 'smooth' });
            });
            results.appendChild(card);
        });
    } catch(err) {
        results.innerHTML = 'Error fetching results.';
        console.error(err);
    }
});

// Close player
closePlayer.addEventListener('click', () => {
    videoPlayer.src = '';
    playerContainer.style.display = 'none';
});
</script>

</body>
</html>
