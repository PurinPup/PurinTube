<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MiniTube - YouTube Clone</title>
<style>
    /* Galaxy animated background */
    body {
        font-family: Arial, sans-serif;
        margin:0; padding:0;
        background: linear-gradient(-45deg, #1a1a2e, #162447, #1f4068, #e43f5a);
        background-size: 400% 400%;
        animation: gradientBG 20s ease infinite;
        color: white;
    }

    @keyframes gradientBG {
        0% {background-position:0% 50%;}
        50% {background-position:100% 50%;}
        100% {background-position:0% 50%;}
    }

    header { background:rgba(255,0,0,0.8); color:white; padding:15px; text-align:center; font-size:24px; position:sticky; top:0; z-index:100; }
    #search-bar { display:flex; justify-content:center; margin:20px; }
    #search-input { width:60%; padding:10px; font-size:16px; border-radius:5px; border:none; }
    #search-button { padding:10px 20px; font-size:16px; margin-left:10px; cursor:pointer; border-radius:5px; border:none; background:#ff0000; color:white; }
    #results { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; padding:10px; }
    .video-card { background:rgba(0,0,0,0.5); width:300px; cursor:pointer; border-radius:5px; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.5); transition:transform 0.2s; }
    .video-card:hover { transform: scale(1.05); }
    .video-card img { width:100%; }
    .video-title { padding:10px; font-size:16px; font-weight:bold; color:white; }
    #player-container { display:none; text-align:center; margin:20px; }
    #close-player { margin:10px; cursor:pointer; color:#ff0000; font-weight:bold; }
</style>
</head>
<body>

<header>MiniTube</header>

<div id="search-bar">
    <input type="text" id="search-input" placeholder="Search YouTube videos">
    <button id="search-button">Search</button>
</div>

<div id="results"></div>

<div id="player-container">
    <div id="close-player">âœ– Close Video</div>
    <iframe id="video-player" width="560" height="315" src="" title="YouTube video player" frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div>

<script>
// Search function
const searchButton = document.getElementById('search-button');
const searchInput = document.getElementById('search-input');
const results = document.getElementById('results');
const playerContainer = document.getElementById('player-container');
const videoPlayer = document.getElementById('video-player');
const closePlayer = document.getElementById('close-player');

searchButton.addEventListener('click', async () => {
    const query = searchInput.value.trim();
    if (!query) return;
    results.innerHTML = 'Loading...';
    
    const searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;
    
    try {
        const res = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(searchUrl)}`);
        const data = await res.json();
        const html = data.contents;
        
        const videoIds = [...html.matchAll(/"videoId":"(.*?)"/g)].map(m => m[1]);
        const uniqueIds = [...new Set(videoIds)].slice(0, 12);
        
        results.innerHTML = '';
        uniqueIds.forEach(id => {
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <img src="https://img.youtube.com/vi/${id}/hqdefault.jpg" alt="Thumbnail">
                <div class="video-title">Video</div>
            `;
            card.addEventListener('click', () => {
                videoPlayer.src = `https://www.youtube.com/embed/${id}`;
                playerContainer.style.display = 'block';
                window.scrollTo(0, playerContainer.offsetTop);
            });
            results.appendChild(card);
        });
    } catch (err) {
        results.innerHTML = 'Error fetching results.';
        console.error(err);
    }
});

closePlayer.addEventListener('click', () => {
    videoPlayer.src = '';
    playerContainer.style.display = 'none';
});
</script>

</body>
</html>
